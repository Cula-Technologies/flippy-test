import { createCanvas, Image } from "node-canvas-webgl";
import Scene from "../src/Scene.js";
import * as THREE from "three";

const schema = {
  title: "World",
  description: "A simple world widget.",
};

const mapData =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAACgCAYAAAB9o7WcAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAJYAAAABAAAAlgAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAABQKADAAQAAAABAAAAoAAAAADzgUVkAAAACXBIWXMAABcSAAAXEgFnn9JSAAACzmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xNTA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjE1MDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI2Njc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjEzMzQ8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KuoOObgAAMhlJREFUeAHtnQv8ZVP1wLdKJfRUemCiyRSh8ggpRmY8IumBJmYwGnkneSSlIo9RhoaGGowRyhRNenmXosd4hFGMJhKlkuTZ+/zXd/3bt3PP77zvOfeec+9an8/vd+89Z5999ll7n7XXey0TCDgDw4BhwDAwghh42gg+sz2yYcAwYBhQDBgBtIVgGDAMjCwGjACO7NTbgxsGDANGAG0NGAYMAyOLgWeM7JOP6IP/+9//dn/729/cP/7xD/fPf/7TeRvY05/+dLfsssvq3zOf+Uz3jGfY0hjRJTJSj22rfEim+09/+pMSreWXX97ddddd7pvf/KZ+PutZz3L8Pfroo+53v/udo91jjz2mRDCOAD772c92z3nOc9yKK67onv/857sXvehFbqWVVnIvfvGL9W+nnXbSY0OCNnuMEcfAMuYG0+wV8K9//Uu5NIjV448/7v7617+6v//97+7lL3+5g1idf/757u6773Y/+tGP3P333++e97znuV//+tdK4Op4snXXXdftsccebp111nHLLLOM+9a3vuX++Mc/upVXXtmtttpqbq211nKTJ0+u49bWp2GgcgwYAawcpeU7/MlPfuLmzZvndthhB3fLLbe4H//4x0rUIIKIrXBxTzzxhIquEJzlllvO/epXvyp/w4qufNrTnuZe//rXu9e97nVus802cx/4wAcq6tm6MQzUiwETgevFb+7eIXBweUuWLHHbb7995nUPPPBAZpu6G7ztbW9Tgvf+97/fvfrVr677dta/YaByDBgHWDlK83eISHvddde5E044wUHQEF8xTtx5553uP//5T/6OBtTye9/7ntt6660HdHe7bRkMsNGiOjH4fwwYARzgSvjqV7/qzjvvPIdl9iUveYkaKC6//PIBjij/rXmJdtxxR3fRRRepLjD/laPb8vbbb9eNDT0q+tN+wV/+8hd3zjnnONbWb37zG/eqV73KzZgxw2288cbuwQcfdHgAvOAFL1A9Lp4AowRGABsw23B/n/3sZ93PfvYz99BDD+lLgl4NC+z48eOVMNKGxYoVd9CAi8yHP/xhtSaffPLJDsuzgVMDFSqM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";

const world = function () {
  const scene = new Scene();
  let globe;

  const clock = new THREE.Clock();

  scene.once("loaded", async () => {
    // Replace directional light with ambient light for uniform illumination
    const ambientLight = new THREE.AmbientLight("#ffffff", 3);
    scene.add(ambientLight);

    // textures

    var canvas = createCanvas(320, 160);
    var ctx = canvas.getContext("2d");

    var image = new Image();
    image.onload = function () {
      ctx.drawImage(image, 0, 0);
    };
    image.src = mapData;

    const dayTexture = new THREE.CanvasTexture(canvas);

    const material = new THREE.MeshStandardMaterial({
      map: dayTexture,
      roughness: 0.5,
      // Add emissive properties to make it self-illuminating
      emissive: "#404040",
      emissiveMap: dayTexture,
    });

    const sphereGeometry = new THREE.SphereGeometry(1, 64, 64);
    globe = new THREE.Mesh(sphereGeometry, material);
    globe.position.z = -1;
    scene.add(globe);
  });

  scene.useLoop(() => {
    const delta = clock.getDelta();
    globe.rotation.y += delta * 0.25;
  }, 15);

  return scene;
};

export { world as scene, schema };
